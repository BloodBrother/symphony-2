/**
 * Symphony Fields
 *
 * This file contains styles for the widespread field component
 * and its elements (inputs of all sorts, labels and legends, etc.)
 *
 * @since Symphony 4.0.0
 */

@import "variables";

.field {

	/* Prevent line-height in containers by setting all to block --------*/
	>textarea, select {
		display: block;
	}

	/* Layout model - enclosed fields, piling without margins --------*/
	--standard-field-border-color: transparent;
	border: 1px solid var(--color-ui);
	margin-bottom: -1px;

	&:first-of-type {
		&, input:not([type=checkbox]), select, textarea {
			border-top-left-radius: var(--radius-current);
			border-top-right-radius: var(--radius-current);
		}
	}

	&:last-of-type {
		&, input:not([type=checkbox]), select, textarea {
			border-bottom-left-radius: var(--radius-current);
			border-bottom-right-radius: var(--radius-current);
			border-bottom-color: var(--color-ui);
		}

		input:not([type=checkbox]), select, textarea {
			margin-bottom: -1px;
		}
	}
	
	>*:first-child {
		margin-left: var(--standard-inner-rhythm);

		&+*~* {
			margin-left: var(--standard-inner-rhythm);
			margin-bottom: var(--standard-inner-rhythm);
		}
	}

	/* Position field titles/labels as if in input --------*/
	&:not(.field-checkbox)>*:first-child {
		top: var(--standard-inner-rhythm);
		height: 0;
		background-color: inherit;

		>* {
			position: relative;
			display: inline-block;
			background-color: inherit;
			padding: 0 var(--spacing-nano);
			margin-left: calc(-1 * var(--spacing-nano));
			height: 1.5rem;
			line-height: 1.5rem;
		}
		

		&+input:not([type=checkbox]), 
		&+select, 
		&+textarea,
		&+* input:not([type=checkbox]),
		&+* select,
		&+* textarea {
			margin-top: 0;
			padding-top: calc(var(--standard-inner-rhythm) + 1.5em);
		}
	}

/* Interactive styles --------*/
	&:not(:hover) { 
		color: var(--standard-field-color);

		label {
			color: var(--standard-label-color);

			>i {
				opacity: 0;
			}
		}
	}

	&:hover {
		color: var(--standard-field-hover-color);

		input:not([type=checkbox]):not(:focus), select:not(:focus), textarea:not(:focus) {
			border-bottom-color: var(--standard-field-hover-border-color);
			color: var(--standard-field-hover-color);
		}
	}


/* Special case for uploaded file input --------*/
	&.field-upload {
		label+span {
			display: flex;
			align-items: center;
			padding-top: 0;

			a, input {
				flex-grow: 1;

				~* {
					margin: 0 var(--standard-inner-rhythm);
				}
			}

			input[type=file] {
				padding-top: calc(var(--standard-inner-rhythm) + 1.5em);
			}

			[type="hidden"]~a {
				display: block;
				color: inherit;
				white-space: nowrap;
				overflow: hidden;
				text-overflow: ellipsis;
				flex-shrink: 1;
				flex-basis: 0;
				padding-top: calc(var(--standard-inner-rhythm) + 1.5em);
				padding-bottom: var(--standard-inner-rhythm);
			}

			[type="hidden"]~a:hover {
				color: var(--standard-field-hover-color);
			}
		}

		&:not(:hover) {
			button {
				opacity: .25;
			}
		}
	}

	&.field-checkbox,
	&.field-upload {
		align-items: center;
	}

	&.field-date {
		position: relative;
	}

	&.field-date .suggestions,
	.tags {
		max-width: initial;
		flex: 100% 0 0;
	}

	/* Special treatment for checkbox field --------*/
	&.field-checkbox {
		label {
			margin-top: var(--standard-inner-rhythm);
		}

		input {
			margin-left: var(--standard-inner-rhythm);
		}
	}

	/* Position error message --------*/
	.invalid { 
		position: relative;
		label+p {
			position: absolute;
			top: -.25em;
			right: 1em;
			min-width: max-content;
			z-index: 1;
		}
	}
}