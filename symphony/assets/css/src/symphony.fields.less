/**
 * Symphony Fields
 *
 * This file contains styles for the widespread field component
 * and its elements (inputs of all sorts, labels and legends, etc.)
 *
 * @since Symphony 4.0.0
 */

@import "variables";

.field {
	box-sizing: border-box;
	position: relative;
	min-height: var(--standard-field-height);
	margin-top: var(--standard-container-rhythm);

	>* {
		margin-top: var(--standard-inner-rhythm);
	}

	label>span {
		line-height: 1.1em;
		display: inline-block;
	}

/* Interactive styles --------*/
	&:not(:hover) { 
		color: var(--standard-field-color);

		label {
			color: var(--standard-label-color);

			&:before, &:after {
				opacity: .4;
			}

			>i {
				opacity: 0;
			}
		}
	}

	&:hover {
		color: var(--standard-field-hover-color);

		input:not([type=checkbox]):not(:focus), select:not(:focus), textarea:not(:focus) {
			border-bottom-color: var(--standard-field-hover-border-color);
			color: var(--standard-field-hover-color);
		}
	}

/* Special case for uploaded file input --------*/
	label+span {
		display: contents;

		a, input {
			flex-grow: 1;

			~* {
				margin-left: var(--standard-container-rhythm);
			}
		}

		button {
			&:not(:hover) {
				opacity: .25;
			}
		}

		[type="hidden"]~a {
			display: block;
			color: inherit;
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
			flex-shrink: 1;
			flex-basis: 0;
		}

		[type="hidden"]~a:hover {
			color: var(--standard-field-hover-color);
		}
	}

	&.field-checkbox,
	&.field-upload {
		align-items: center;
	}

	&.field-date .suggestions,
	.tags {
		max-width: initial;
		flex: 100% 0 0;
	}

	/* Position error message --------*/
	.invalid label~* {
		position: absolute;
		bottom: -1em;
		min-width: max-content;
		z-index: 1;
	}
 }

/* Layout model - horizontal with label inside inputs --------*/
@media (min-width: @xs) {
	.field {
		display: flex;
		align-items: baseline;
		flex-wrap: wrap;

		&,>* {
			margin-top: initial;
		}

		&+& {
			margin-top: -2px;
		}

		&>*:first-child, &:after {
			flex-basis: var(--standard-label-min-width);
			flex-shrink: 0;
			box-sizing: border-box;
		}

		&>*+* {
			flex-basis: 0;
			flex-grow: 10;
			min-width: var(--dimension-tiniest);
			flex-shrink: 1;
			margin-right: auto;
		}

		&>*+*~* {
			max-width: var(--dimension-tiny);
			margin-right: auto;
			margin-top: var(--spacing-nano);
		}

		input:not([type=checkbox]),
		textarea,
		select {
			min-height: var(--standard-field-height);
			margin-left: calc(-1 *  var(--standard-label-min-width));
			margin-right: 0;
			padding-left: calc(var(--standard-label-min-width) + var(--standard-container-rhythm));
			transition: all 200ms var(--ease-current);
		}

		select:focus,
		textarea:focus,
		input:not([type=checkbox]):focus {
			border-color: var(--standard-field-focus-border-color);
		}

		/* Enlarged style for states filling container padding --------*/
		input:-webkit-autofill,
		select:not(:placeholder-shown),
		textarea:not(:placeholder-shown),
		input:not([type=checkbox]):not(:placeholder-shown),
		select:focus,
		textarea:focus,
		input:not([type=checkbox]):focus,
		&:hover select,
		&:hover textarea,
		&:hover input:not([type=checkbox]) {
			margin-left: calc(-1 *  var(--standard-label-min-width) - var(--standard-container-rhythm));
			margin-right: calc(-1 *  var(--standard-container-rhythm));
			padding-right: calc(var(--standard-field-padding) + var(--standard-container-rhythm));
			padding-left: calc(var(--standard-label-min-width) + var(--standard-container-rhythm) + var(--standard-container-rhythm));
		}

		/* Prevent icon from jumping around --------*/
		&:hover select:not([multiple]),
		select:not(:placeholder-shown),
		select:not([multiple]):focus {
			padding-right: calc(0.65em + var(--spacing-thinnest) * 2 + var(--standard-container-rhythm));
			background-position: right calc(.7em + var(--standard-container-rhythm)) top 50%;
		}

		label>i:not(:empty) {
			display: block;
			height: 0;
			line-height: 0;
			top: var(--spacing-nano);
			position: relative;
		}

		&.field-date .suggestions {
			left: calc(var(--standard-label-min-width) + var(--standard-container-rhythm));
		}
	}

}