/**
 * Symphony Tables
 */

/*-----------------------------------------------------------------------------
	LESS â€” Variables Importing
-----------------------------------------------------------------------------*/

@import "variables";

/*-----------------------------------------------------------------------------
	Table Typography
-----------------------------------------------------------------------------*/
table {
	font-size: var(--text-smaller);
	line-height: 1.2em;
	font-weight: 400;
	text-align: left;

	td, th {
		white-space: nowrap;
	}

	th {
		font-weight: inherit;
	}

	&[role="directory"] td {
		&:first-child {
			font-size: var(--text-current);
		}
	}
}


/*-----------------------------------------------------------------------------
	Directory table Rhythm & Skin
-----------------------------------------------------------------------------*/
table[role="directory"] {
	background-color: var(--standard-table-background-color);
	padding: var(--standard-inner-rhythm);
	border-spacing: 0 2px;
	margin: var(--standard-inner-rhythm);
	border-radius: var(--radius-current);

	thead, tbody, tr, th, td {
		background-color: inherit;
	}

	td, th {
		padding: var(--standard-inner-rhythm) var(--standard-container-rhythm);
		&:first-child {
			padding-right: calc(var(--standard-container-rhythm) * 2);
		}
	}

	th {
		color: var(--color-main-light);
		a {
			color: inherit;

			&.active {
				background-color: var(--color-accent-alt-light);
				color: var(--color-main-dark);
			}

			&:hover {
				color: var(--color-accent);
				&:not(.active) {
					background-color: var(--color-accent-light);
				}
			}

			&:after {
				margin-left: var(--spacing-nano);
				font-size: var(--text-smallest);
			}


			&[href*="order=desc"]:after,
			&.active[href*="order=asc"]:after,
			&.active[href*="order=desc"]:hover:after {
				content: '\2193'; /* down arrow */
			}

			&[href*="order=asc"]:after,
			&.active[href*="order=desc"]:after,
			&.active[href*="order=asc"]:hover:after {
				content: '\2191'; /* up arrow */
			}
		}
	}

	td {
		border-top: 1px solid transparent;
		border-bottom: 1px solid transparent;

		img {
			max-width: var(--spacing-broadest);
			max-height: var(--spacing-broader);
			border-radius: var(--radius-smallest);
		}

		a {
			color: var(--color-main-dark);

			&:hover {
				color: var(--color-accent);
			}
		}
	}
}

/*-----------------------------------------------------------------------------
	Directory table Layout
-----------------------------------------------------------------------------*/
table[role="directory"] {
	display: block;
	overflow: auto;
	max-height: calc(100vh - var(--dimension-tiniest));
	position: relative;

	&::-webkit-scrollbar {
		background-color: transparent;
		height: var(--spacing-nano);
		width: var(--spacing-nano);
	}

	&:hover::-webkit-scrollbar {
		&-thumb {
			background-color: var(--color-ui);
			border-radius: var(--radius-current);
		}
	}

	@media (min-width: @xs) {
		td, th {
			&:first-child {
				position: sticky;
				left: calc(-1 * var(--standard-inner-rhythm) - var(--radius-current));
				padding-left: calc(var(--standard-inner-rhythm) + var(--radius-current));
			}
		}

		td {

			&:first-child {
				background: linear-gradient(to right, var(--standard-table-background-color) 80%, transparent 100%);
				background-size: 100% 1.3em;
				background-position: center center;
				background-repeat: no-repeat;
			}
		}
	}

	th {
		top: calc(-1 * var(--standard-inner-rhythm));
		position: sticky;
		z-index: 1;

		&:first-child {
			z-index: 2;
		}
	}

}

/*-----------------------------------------------------------------------------
	Selectable rows
-----------------------------------------------------------------------------*/
table.selectable {
	input {
		display: none;
	}

	td:not(.inactive) {
		cursor: copy;
	}

	&.orderable td:not(.inactive) {
		cursor: -webkit-grab;
	}

	tr.ordering td:not(.inactive) {
		cursor: -webkit-grabbing;
	}

	tbody {
		tr {
			td:first-child {
				border-left: 1px solid transparent;
				border-top-left-radius: var(--radius-current);
				border-bottom-left-radius: var(--radius-current);
			}

			td:last-child {
				border-right: 1px solid transparent;
				border-top-right-radius: var(--radius-current);
				border-bottom-right-radius: var(--radius-current);
			}

			&:hover:not(.selected):not(.ordering) {
				background-color: var(--standard-hover-row-background-color);
				td {
					z-index: 2;

					border-color: var(--color-ui);

					&:first-child {
						background: linear-gradient(to right, var(--standard-hover-row-background-color) 80%, transparent 100%);
					}
				}
			}

			&:not(:hover):not(.selected)+*:not(:hover):not(.selected) td {
				border-radius: 0;
				border-top-color: var(--color-ui);
			}

			&.selected, &.ordering {
				background-color: var(--standard-selected-row-background-color);
				border-color: var(--color-ui);
				filter: drop-shadow(var(--shadow-small));
				z-index: 1;

				td {
					&:first-child {
						background: linear-gradient(to right, var(--standard-selected-row-background-color) 80%, transparent 100%);
					}
				}
			}
		}
	}
}


/*-----------------------------------------------------------------------------
	States
-----------------------------------------------------------------------------*/

tr {
	&.status-ok:not(.selected) {
		color: var(--color-accent);
	}

	&.status-notice:not(.selected) {
		color: var(--color-accent-alt);
	}

	&.status-error:not(.selected) {
		color: var(--color-error);
	}

	&.inactive:not(.selected) {
		pointer-events: none;
		opacity: 0.5;
		color: var(--color-main-light);
	}
}