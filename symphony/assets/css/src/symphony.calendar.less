/**
 * Symphony Calendar
 */

@import "variables";



.calendar {
	padding: var(--spacing-thinner);
	background-color: var(--standard-field-focus-background-color);
	position: relative;
	margin: 0 auto;
	min-width: var(--dimension-tiniest);
	z-index: 20;

	border: 1px solid var(--color-accent-alt);
	border-top: none;
	border-bottom-right-radius: var(--radius-current);
	border-bottom-left-radius: var(--radius-current);

	&.hidden {
		display: none;
	}

	/* Minimal height and positioning context --------*/
	nav {
		position: relative;
		height: var(--spacing-broad);
		display: flex;
		justify-content: space-between;
	}

	/* Arrows for previous/next navigation --------*/
	.clndr-previous-button,
	.clndr-next-button {
		font-size: 0;
		width: 3rem;

		background: url(../img/symphony.calendar.svg) no-repeat;
		background-size: 3rem 9rem;

		&:not(:hover) {
			opacity: .3;
		}
	}

	.clndr-previous-button {
		background-position: 0 -3rem;
	}

	.clndr-next-button {
		background-position: 0 -6rem;
	}

	/* Acts as a trigger *and* container for the month/year selection menu  --------*/
	.switch {
		/* Graphical styles --------*/
		border-radius: var(--radius-current);
		// background: var(--standard-field-focus-background-color);
		font-size: var(--text-smaller);

		/* Force dimensions in all states --------*/
		height: 3rem;
		width: var(--spacing-larger);

		/* Treat as a trigger --------*/
		cursor: pointer;

		/* Set context for selection menu --------*/
		overflow: hidden;
		position: relative;

		/* Give the illusion that the two lists are one container with radius --------*/
		overflow: hidden;
		
		&:first-child {
			border-radius: var(--radius-current) 0 0 var(--radius-current);
		}

		&:last-child {
			border-radius: 0 var(--radius-current) var(--radius-current) 0;
		}

		/* Basic list menu styles --------*/
		ul {
			/* Side-by-side lists that overflow their container --------*/
			float: left;
			
			/* Position the current month (the seventh one) inside the trigger --------*/
			margin-top: calc(-3rem * 6);
			
			/* Emulate centered behavior for selection lists --------*/
			&:first-child {
				text-align: right;
			}

			/* Separator --------*/
			&+& {
				border-left: 0.1rem solid transparent;
			}

			/* Specific dimensions to months and years --------*/
			&.months {
				width: 55%;
			}

			&.years {
				width: 45%;
			}


			/* General item graphical styles --------*/
			li {
				line-height: 3rem;
				padding: 0 var(--spacing-nano);
				height: 3rem;
				cursor: pointer;
			}

			/* Vertical triangles icons for trigger --------*/
			&:before {
				content: '';
				display: block;
				position: absolute;
				top: 50%;
				margin-top: -1.5rem;
				background: url(../img/symphony.calendar.svg) 0 0 no-repeat;
				width: 3rem;
				height: 3rem;
				opacity: 0.3;
			}

			/* Position icons to horizontal edges of trigger --------*/
			&:first-child:before {
				left: 0;
			}

			&:last-child:before {
				right: 0;
			}
		}

		/* The month/year selection interface is opened --------*/
		&.select {
			overflow: visible;
			filter: drop-shadow(var(--shadow));

			>ul {
				background: var(--color-main-lightest);

				li {
					&:hover:not(:nth-child(7)) {
						color: var(--color-clear);
						background: var(--color-accent);
					}

					&:nth-child(7) {
						background: var(--color-main-lighter);
					}
				}

				/* Hide icons when trigger is selected --------*/
				&:before {
					display: none;
				}
			}
		}
	}

	table {
		width: 100%;
		border-collapse: collapse;
		color: var(--color-main);

		td {
			text-align: center;
			width: 14.28%;
			height: var(--spacing-broad);
			vertical-align: middle;
		}

		tbody td {
			border: 1px solid transparent;
		}

		.adjacent-month {
			color: var(--color-main-lighter);
		}

		.day {
			/* Fill the table cell and center everything --------*/
			display: flex;
			align-items: center;
			justify-content: center;
			width: 100%;
			height: 100%;
			box-sizing: border-box;

			border: 1px solid transparent;
			cursor: pointer;
			background: var(--color-main-lightest);

			&.today:not(.active) {
				border-color: var(--color-main-lighter);
			}

			&.active {
				background: var(--color-accent-alt-light);
				color: var(--color-main-dark);
			}

			&:hover:not(.active) {
				border-color: var(--color-accent);
			}
		}
	}
}
